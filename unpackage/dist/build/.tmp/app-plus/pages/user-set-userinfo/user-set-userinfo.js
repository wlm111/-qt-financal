(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user-set-userinfo/user-set-userinfo"],{"2c80":function(e,t,r){"use strict";var n=r("a321"),i=r.n(n);i.a},5680:function(e,t,r){"use strict";(function(e){r("1133"),r("921b");n(r("66fd"));var t=n(r("5c1e"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("6e42")["createPage"])},"5c1e":function(e,t,r){"use strict";r.r(t);var n=r("ba45"),i=r("b244");for(var s in i)"default"!==s&&function(e){r.d(t,e,function(){return i[e]})}(s);r("2c80");var u,a=r("f0c5"),o=Object(a["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],u);t["default"]=o.exports},"85fa":function(e,t,r){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r("a34a")),s=u(r("6c04"));function u(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return f(e)||c(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done);n=!0)if(r.push(u.value),t&&r.length===t)break}catch(o){i=!0,s=o}finally{try{n||null==a["return"]||a["return"]()}finally{if(i)throw s}}return r}function f(e){if(Array.isArray(e))return e}function h(e,t,r,n,i,s,u){try{var a=e[s](u),o=a.value}catch(c){return void r(c)}a.done?t(o):Promise.resolve(o).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function u(e){h(s,n,i,u,a,"next",e)}function a(e){h(s,n,i,u,a,"throw",e)}u(void 0)})}}var d=["不限","男","女"],p=["秘密","未婚","已婚"],b=["秘密","IT","老师"],m=function(){return Promise.all([r.e("common/vendor"),r.e("components/mpvue-citypicker/mpvueCityPicker")]).then(r.bind(null,"0ba1"))},v={components:{mpvueCityPicker:m},data:function(){return{sexArr:d,qgArr:p,userpic:"",username:"",sex:0,qg:0,job:"",birthday:"",cityPickerValueDefault:[0,0,1],pickerText:""}},onLoad:function(){this.userpic=this.User.userinfo.userpic,this.username=this.User.userinfo.username,this.sex=this.User.userinfo.userinfo.sex||0,this.qg=this.User.userinfo.userinfo.qg||0,this.job=this.User.userinfo.userinfo.job||"请填写",this.birthday=this.User.userinfo.userinfo.birthday||"请填写",this.pickerText=this.User.userinfo.userinfo.path||"请填写"},onBackPress:function(){if(this.$refs.mpvueCityPicker.showPicker)return this.$refs.mpvueCityPicker.pickerCancel(),!0},onUnload:function(){this.$refs.mpvueCityPicker.showPicker&&this.$refs.mpvueCityPicker.pickerCancel()},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},methods:{showMulLinkageThreePicker:function(){this.$refs.mpvueCityPicker.show()},onConfirm:function(e){this.pickerText=e.label},bindDateChange:function(e){this.birthday=e.target.value},changeimg:function(){var t=l(i.default.mark(function t(){var r,s,u,o,c,f,h,l;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.chooseImage({count:1,sizeType:["compressed"]});case 2:if(r=t.sent,s=a(r,2),s[0],u=s[1],u){t.next=8;break}return t.abrupt("return");case 8:return e.showLoading({title:"上传中...",mask:!1}),t.next=11,this.$http.upload("/edituserpic",{name:"userpic",filePath:u.tempFilePaths[0],token:!0,checkToken:!0});case 11:if(o=t.sent,c=a(o,2),f=c[0],h=c[1],console.log(n(h," at pages\\user-set-userinfo\\user-set-userinfo.vue:143")),l=JSON.parse(h.data),!f&&!l.errorCode){t.next=21;break}return e.showToast({title:l.msg?l.msg:"上传失败",icon:"none"}),e.hideLoading(),t.abrupt("return",!1);case 21:e.hideLoading(),e.showToast({title:"修改头像成功!"}),this.userpic=l.data,this.User.userinfo.userpic=this.userpic,e.setStorageSync("userinfo",this.User.userinfo);case 26:case"end":return t.stop()}},t,this)}));function r(){return t.apply(this,arguments)}return r}(),changeOne:function(t){var r=this,n=[];switch(t){case"sex":n=d;break;case"qg":n=p;break;case"job":n=b;break}e.showActionSheet({itemList:n,success:function(e){switch(t){case"sex":r.sex=e.tapIndex;break;case"qg":r.qg=e.tapIndex;break;case"job":r.job=n[e.tapIndex];break}}})},submit:function(){var t=l(i.default.mark(function t(){var r,n,u,o,c;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r={name:this.username,sex:this.sex,qg:this.qg,job:this.job,birthday:this.birthday,path:this.pickerText,age:s.default.gettime.getAgeByBirthday(this.birthday)},t.next=3,this.$http.post("/edituserinfo",r,{token:!0,checkToken:!0});case 3:if(n=t.sent,u=a(n,2),o=u[0],c=u[1],this.$http.errorCheck(o,c)){t.next=9;break}return t.abrupt("return");case 9:e.showToast({title:"修改成功！"}),this.User.userinfo.username=this.username,this.User.userinfo.userinfo=r,e.setStorageSync("userinfo",this.User.userinfo);case 13:case"end":return t.stop()}},t,this)}));function r(){return t.apply(this,arguments)}return r}(),getDate:function(e){var t=new Date,r=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return"start"===e?r-=60:"end"===e&&(r+=2),n=n>9?n:"0"+n,i=i>9?i:"0"+i,"".concat(r,"-").concat(n,"-").concat(i)}}};t.default=v}).call(this,r("6e42")["default"],r("0de9")["default"])},a321:function(e,t,r){},b244:function(e,t,r){"use strict";r.r(t);var n=r("85fa"),i=r.n(n);for(var s in n)"default"!==s&&function(e){r.d(t,e,function(){return n[e]})}(s);t["default"]=i.a},ba45:function(e,t,r){"use strict";var n,i=function(){var e=this,t=e.$createElement;e._self._c},s=[];r.d(t,"b",function(){return i}),r.d(t,"c",function(){return s}),r.d(t,"a",function(){return n})}},[["5680","common/runtime","common/vendor"]]]);