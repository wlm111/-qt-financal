(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bill/billgl"],{"1e24":function(t,e,n){"use strict";(function(t){n("1133"),n("921b");r(n("66fd"));var e=r(n("5362"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"44f1":function(t,e,n){"use strict";n.r(e);var r=n("e0b1"),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e["default"]=i.a},5362:function(t,e,n){"use strict";n.r(e);var r=n("ce86"),i=n("44f1");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("8720");var o,u=n("f0c5"),s=Object(u["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);e["default"]=s.exports},8720:function(t,e,n){"use strict";var r=n("8961"),i=n.n(r);i.a},8961:function(t,e,n){},ce86:function(t,e,n){"use strict";var r,i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return r})},e0b1:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("a34a"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return s(t)||u(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)if(n.push(o.value),e&&n.length===e)break}catch(s){i=!0,a=s}finally{try{r||null==u["return"]||u["return"]()}finally{if(i)throw a}}return n}function s(t){if(Array.isArray(t))return t}function c(t,e,n,r,i,a,o){try{var u=t[a](o),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(r,i)}function d(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){c(a,r,i,o,u,"next",t)}function u(t){c(a,r,i,o,u,"throw",t)}o(void 0)})}}var l=function(){return n.e("components/common/load-more").then(n.bind(null,"f349"))},f=function(){return n.e("components/common/no-thing").then(n.bind(null,"d4b7"))},h=function(){return n.e("components/bill/bill-list-item").then(n.bind(null,"5016"))},m=function(){return n.e("components/bill/bill-data").then(n.bind(null,"08861"))},p={components:{loadMore:l,noThing:f,billData:m,billListItem:h},data:function(){return{userinfo:{userpic:"",username:"",id:0},recorddata:[{name:"支出",num:0},{name:"收入",num:0},{name:"报销",num:0},{name:"信用卡借贷",num:0}],swiperheight:1e3,tabIndex:0,recordlist:[{loadtext:"上拉加载更多",page:1,firstload:!1,list:[]}]}},onLoad:function(t){this.__init(t.userid)},onReachBottom:function(){this.loadmore()},onPullDownRefresh:function(){this.getList()},methods:{__init:function(e){this.getUserInfo(e),this.getList(),t.$on("updateData",this.updateData),this.getCounts(e)},getUserInfo:function(){var t=d(r.default.mark(function t(e){var n;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:["不限","男","女"],["秘密","未婚","已婚"],e==this.User.userinfo.id&&(info=this.User.userinfo,n=!0),this.userinfo={isme:n,id:info.id,userpic:info.userpic,username:info.username};case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getCounts:function(){var t=d(r.default.mark(function t(e){var n,i,o,u,s;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/user/getcounts/"+e);case 2:if(i=t.sent,o=a(i,2),u=o[0],s=o[1],this.$http.errorCheck(u,s)){t.next=8;break}return t.abrupt("return");case 8:n=s.data.data,n&&(this.recorddata[0].num=n.zc_sum,this.recorddata[1].num=n.sr_sum,this.recorddata[2].num=n.bx_sum,this.recorddata[3].num=n.xyk_sum);case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),loadmore:function(){"上拉加载更多"==this.recordlist[this.tabIndex].loadtext&&(this.recordlist[this.tabIndex].loadtext="加载中...",this.recordlist[this.tabIndex].page++,this.getList())},updateData:function(t){switch(t.type){case"updateList":this.updateList(t);break;case"Editcord":this.updateRecord(t);break;case"delList":this.delList(t);break}},getList:function(){var t=d(r.default.mark(function t(){var e,n,i,o,u,s,c,d,l;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.recordlist[this.tabIndex].page,t.next=3,this.$http.get("/user/record/".concat(e),{},{token:!0});case 3:if(n=t.sent,i=a(n,2),o=i[0],u=i[1],this.$http.errorCheck(o,u)){t.next=9;break}return t.abrupt("return",this.recordlist[this.tabIndex].loadtext="上拉加载更多");case 9:for(s=[],c=u.data.data.list,d=this.tabIndex,l=0;l<c.length;l++)s.push(this.__format(c[l]));return this.recordlist[d].list=e>1?this.recordlist[d].list.concat(s):s,this.recordlist[d].firstload=!0,this.recordlist[d].loadtext=c.length<10?"没有更多数据了":"上拉加载更多",t.abrupt("return");case 17:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),__format:function(t){return{id:t.id,money:t.money,type:t.type,account_type:t.account_type,time:t.time,category_id:t.category_id,remark:t.remark,category:{id:t.category.id,name:t.category.name}}},updateList:function(t){this.recordlist[this.tabIndex].list.push(this.__format(t))},updateRecord:function(t){this.recordlist[this.tabIndex].list.forEach(function(e,n){e.id===t.id&&(e.category.name=t.data.category.name,e.money=t.data.money,e.time=t.data.time)})},delList:function(t){var e=this;this.recordlist[this.tabIndex].list.forEach(function(n,r){n.id===t.id&&e.recordlist[e.tabIndex].list.splice(r,1)})},addrecord:function(){t.navigateTo({url:"bill"})}}};e.default=p}).call(this,n("6e42")["default"])}},[["1e24","common/runtime","common/vendor"]]]);